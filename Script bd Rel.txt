create schema [SmartCity];

drop table [SmartCity].Annonce;
drop table [SmartCity].Images;
drop table [SmartCity].Animal;
drop table[SmartCity].breed;
drop table[SmartCity].Species;
drop table [SmartCity].[Personne];
drop table [SmartCity].[Ville];
drop table [SmartCity].[Status];


create table [SmartCity].[Status](
	id [int] not null identity(1,1),
	primary key(id),
	[State] [NVARCHAR](100)
);

create table [SmartCity].Ville(
	[Name] [NVarchar](50),
	PostalCode [int] not null,
	primary key(PostalCode)
);

create table [SmartCity].[Personne](
	[Login] [NVARCHAR](25) not null,
	[Password][nvarchar](25) not null,
	LastName [nvarchar](50)not null,
	FirstName[nvarchar](50)not null,
	phone[int],
	email [nvarchar](255) not null,
	IDStatus [int] not null references [SmartCity].[status](id),
	postalCode [int] not null references [SmartCity].[Ville](PostalCode),
	constraint PK_Personne primary key([Login],[Password])
);

create table [SmartCity].Species(
	id [int] not null identity(1,1) primary key,
	[name] [nvarchar](25) not null
);

create table [SmartCity].[Breed](
	id [int] not null identity(1,1) primary key,
	[name] [nvarchar](25) not null,
	idSpecies [int] not null references [SmartCity].Species(id)
);


create table [SmartCity].[Animal](
	id [int] not null identity(1,1) primary key,
	[name] [nvarchar](25) not null,
	[color] [nvarchar](25) not null,
	idBreed [int] not null references [SmartCity].[Breed](id)
);


create table [SmartCity].Images(
	id [int] not null identity(1,1) primary key,
	title[nvarchar] (25) not null,
	idAnimal[int] not null references [SmartCity].Animal(id)
);


create table [SmartCity].Annonce(
	id [int] not null identity(1,1) primary key,
	[date] [DATETIME] not null,
	[description] [nvarchar](100) not null,
	idStatus [int] not null references [SmartCity].[Status](id),
	idAnimal [int] not null references [SmartCity].Animal(id),
	pwPersonne [nvarchar](25),
	loginPersonne[nvarchar](25),
	constraint FK_annonce 
		foreign key(loginPersonne,pwPersonne) 
		references [SmartCity].Personne([login],[password])
);