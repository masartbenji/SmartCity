create schema [SmartCity];

drop table dbo.Announcement;
drop table Images;
drop table dbo.Animal;
drop table breed;
drop table Species;
drop table [Personne];
drop table [Status];
drop table [role];
drop table color;


create table [Status](
	id [int] not null identity(1,1),
	primary key(id),
	[State] [NVARCHAR](20)
);

create table [ApplicationUser](
	[Login] [NVARCHAR](25) not null primary key,
	[Password][nvarchar](25) not null,
	LastName [nvarchar](50)not null,
	FirstName[nvarchar](50)not null,
	Phone[int],
	Email [nvarchar](255) not null
);

create table  Species(
	[name] [nvarchar](25) not null primary key
);

create table [Breed](
	id [int] not null identity(1,1) primary key,
	[name] [nvarchar](25) not null,
	idSpecies [nvarchar](25) not null references  Species([name])
);

create table [Color]([Name] [nvarchar](25) primary key);


create table [Animal](
	id [int] not null identity(1,1) primary key,
	[name] [nvarchar](25) not null,
	[color] [nvarchar](25) not null,
	idBreed [int] not null references [Breed](id),
	idColor [nvarchar](25) not null references [Color]([Name]),
	loginPersonne[nvarchar](25) references [ApplicationUser]([Login])
);


create table Images(
	id [int] not null identity(1,1) primary key,
	title[nvarchar] (25) not null,
	idAnimal[int] not null references Animal(id)
);


create table Announcement(
	id [int] not null identity(1,1) primary key,
	[date] [DATETIME] not null,
	[description] [nvarchar](100) not null,
	coordX [int] not null,
	coordY [int] not null,
	idStatus [int] not null references  [Status](id),
	idAnimal [int] not null references  Animal(id),
	
);